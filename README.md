# 꼬꼬의 길건너기 게임

# 꼬꼬의 길건너기 (Kkokko's Road Crossing)

## 1. 배경 및 아이디어
- 클래식 게임 'Frogger'에서 영감을 받아 제작된 라즈베리파이 기반의 아케이드 게임입니다.
- 귀여운 병아리 캐릭터 '꼬꼬'가 위험한 도로를 건너 안전하게 목적지에 도달하는 것이 목표입니다.
- 시간 제한과 독수리의 위협이라는 요소를 추가하여 게임의 긴장감을 높였습니다.

## 2. 게임 방법
### 조작 방법
- 방향 버튼: 꼬꼬의 이동 방향 설정 (상/하/좌/우)
- 버튼 5: 설정된 방향으로 한 칸 이동
- 버튼 6: 게임 시작/재시작

### 게임 규칙
1. 꼬꼬를 조작하여 화면 상단의 안전 지대까지 이동해야 합니다.
2. 차량과 충돌하면 게임이 종료됩니다.
3. 5초 동안 움직이지 않으면 독수리가 나타나 꼬꼬를 잡아갑니다.
4. 상단의 4줄로 이루어진 안전 지대에 도달하면 게임 클리어!

## 3. 사용된 기술
### 하드웨어
- Raspberry Pi
- ST7789 LCD 디스플레이 (240x240)
- 조작용 버튼 6개

### 소프트웨어
- Python 3
- PIL (Python Imaging Library)
- CircuitPython 라이브러리
  - board
  - digitalio
  - adafruit_rgb_display
  - st7789 (디스플레이 드라이버)

## 4. 주요 기능 및 구현
### 게임 엔진 구조
- `Game`: 게임 상태 관리 (메뉴/플레이/게임오버/엔딩)
- `MapManager`: 맵 생성 및 스크롤링 관리
- `DisplayManager`: 화면 출력 담당
- `InputHandler`: 사용자 입력 처리
- `ImageLoader`: 게임 리소스 관리

### 핵심 구현 사항
1. **동적 맵 생성**
   - 도로, 강, 안전지대 등 다양한 지형 패턴 자동 생성
   - 스크롤링 구현으로 맵 이동 구현

2. **차량 시스템**
   - 다양한 속도와 방향으로 이동하는 차량
   - 차량 간 충돌 방지 로직 구현

3. **독수리 시스템**
   - 플레이어 비활동 시 등장하는 위협 요소
   - 애니메이션과 추적 로직 구현

## 5. 문제점과 해결책

### 1. 독수리 애니메이션 구현
- **문제**: 
  - 독수리가 꼬꼬를 자연스럽게 추적하는 움직임 구현이 어려움
  - 단순 직선 이동은 게임의 재미를 반감시킴
- **해결**:
  - 독수리의 현재 위치와 꼬꼬의 위치를 기반으로 이동 경로 계산
  - 일정 거리 이내로 접근 시 포착 판정 구현
  - 꼬꼬를 잡은 후 상승 애니메이션 추가로 시각적 효과 향상

### 2. 차량 생성 및 배치
- **문제**: 
  - 차량들이 서로 겹치거나 너무 가깝게 생성되는 현상
  - 난이도 조절이 어려워 게임성 저하
- **해결**:
  - 차량 간 최소 거리(4~6칸) 설정
  - 맵 상단으로 갈수록 차량 속도 10%씩 증가하는 난이도 시스템 구현

### 3. 맵 스크롤링 구현
- **문제**: 
  - 맵 스크롤 시 화면 깜빡임 현상 발생
  - 차량 위치가 부자연스럽게 변하는 문제
- **해결**:
  - 더블 버퍼링으로 화면 깜빡임 제거
  - 스크롤 시 차량 y좌표 보정 로직 추가
  - 가시 영역 기반 렌더링 최적화

## 6. 코드 구조 설명

### 프로젝트 구조
project/
├── main.

### 사용된 라이브러리 상세 설명

#### 1. PIL (Python Imaging Library)
- **게임 그래픽 구현**
  - 꼬꼬 캐릭터의 4방향 스프라이트 처리
  - 차량, 독수리 등 게임 오브젝트의 투명 배경 처리
  - 도로, 배경 등 맵 타일 이미지 관리
  - 게임 시작, 종료, 엔딩 화면 구현

#### 2. CircuitPython 관련 라이브러리
- **게임 컨트롤러 구현**
  - `board`, `digitalio`: 6개 버튼 입력 처리
    - 4방향 이동 버튼으로 꼬꼬의 방향 전환
    - 5번 버튼으로 이동 실행
    - 6번 버튼으로 게임 시작/재시작
  
- **디스플레이 출력**
  - `adafruit_rgb_display`, `st7789`: 240x240 LCD 제어
    - 실시간 게임 화면 렌더링
    - 맵 스크롤링 구현
    - 차량 이동 애니메이션
    - 독수리 추적 애니메이션

#### 3. 기본 파이썬 라이브러리
- **게임 로직 구현**
  - `time`: 
    - 게임 프레임 속도 조절 (0.05초 간격)
    - 5초 무입력 시 독수리 등장 타이머
    - 차량 이동 속도 제어
  
  - `random`: 
    - 차량 초기 위치 무작위 배치
    - 차량 재생성 시 간격 조절 (4~6 칸)
    - 상단 맵으로 갈수록 차량 속�� 증가 (10% 씩)
  
  - `os`: 
    - 게임 리소스 폴더 구조 관리
    - 스프라이트, 배경 이지 파일 로드
  
  - `enum`: 
    - 게임 상태 관리 (메뉴/플레이/게임오버/엔딩)
    - 각 상태별 화면 전환 및 로직 처리

### 라이브러리 활용 예시
